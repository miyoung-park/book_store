{"remainingRequest":"/Users/miyoung/Desktop/ebrainsoft_study/personal_project/bookvillage/book_village/bookvillage/front-side/admin-front/node_modules/babel-loader/lib/index.js!/Users/miyoung/Desktop/ebrainsoft_study/personal_project/bookvillage/book_village/bookvillage/front-side/admin-front/node_modules/eslint-loader/index.js??ref--14-0!/Users/miyoung/Desktop/ebrainsoft_study/personal_project/bookvillage/book_village/bookvillage/front-side/admin-front/src/plugins/api-service-plugin/index.js","dependencies":[{"path":"/Users/miyoung/Desktop/ebrainsoft_study/personal_project/bookvillage/book_village/bookvillage/front-side/admin-front/src/plugins/api-service-plugin/index.js","mtime":1649226438855},{"path":"/Users/miyoung/Desktop/ebrainsoft_study/personal_project/bookvillage/book_village/bookvillage/front-side/admin-front/babel.config.js","mtime":1646450231394},{"path":"/Users/miyoung/Desktop/ebrainsoft_study/personal_project/bookvillage/book_village/bookvillage/front-side/admin-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/miyoung/Desktop/ebrainsoft_study/personal_project/bookvillage/book_village/bookvillage/front-side/admin-front/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/miyoung/Desktop/ebrainsoft_study/personal_project/bookvillage/book_village/bookvillage/front-side/admin-front/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8gaW1wb3J0IFZ1ZSBmcm9tICJ2dWUiOwovLyBpbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwovLyBpbXBvcnQgXyBmcm9tICdsb2Rhc2gnOwovLyBpbXBvcnQgQXBpU2VydmljZUZhY3RvcnkgZnJvbSAiLi9hcGktc2VydmljZS1mYWN0b3J5IjsKaW1wb3J0IHsgc3RvcmUgfSBmcm9tICdAL3N0b3JlL2luZGV4JzsKaW1wb3J0IEFwaVNlcnZpY2VFcnJvciBmcm9tICIuL2FwaS1zZXJ2aWNlLWVycm9yIjsKaW1wb3J0IHsgQXBpU2VydmljZUVycm9yRXZlbnRCdXMgfSBmcm9tICcuL2FwaS1zZXJ2aWNlLWVycm9yJzsKdmFyIEFwaVNlcnZpY2VzID0gewogIGluc3RhbGw6IGZ1bmN0aW9uIGluc3RhbGwoVnVlLCBvcHRpb25zKSB7CiAgICBjb25zb2xlLmxvZyhvcHRpb25zKTsKICAgIC8qKiBFdmVudCBlbWl0dGVyICoqLwoKICAgIHZhciBzZXJ2aWNlRXJyb3JFdmVudEJ1cyA9IG5ldyBBcGlTZXJ2aWNlRXJyb3JFdmVudEJ1cygpOyAvLyDrp4zrk6TslrQg64aT7J2AIOydtOuypO2KuOyXkCDqtIDsi6zsnojsnLzrqbQg7JWM66Ck7KO864qUIOyaqeuPhAoKICAgIC8qKiBEZWZhdWx0IGVycm9yIGhhbmRsZXIKICAgICBUT0RPOiDtlZzrsojsl5Ag7LKY66as65CY6ri4IOybkO2VmOuKlCwg6rO17Ya165CY64qUIOyXkOufrOuhnOyngeydgCDsoITsl63soIHsnLzroZwg7LKY66as7ZW07KO86riwKCDthqDtgbDrrLjsoJzroZwg7J247ZWcIOuhnOq3uOyVhOybgyDsspjrpqwgKSAo7JmEKQogICAgIDog7JeQ65+s7LKY66asIOuhnOyngeydtCDrrLTsobDqsbQg7J20IOychOy5mOyXkCDsnojsnYQg7ZWE7JqU64qUIOyXhuyngOunjCDqt7jroIfri6Tqs6Ag7Jes6riwIOyggOq4sOyEnCDsgqzsmqnrkJjshJzrj4Qg7JWI65Cc64ukLiDrsJjrk5zsi5wg7J2Y64+E7ZWcIOy8gOydtOyKpOuhnCDrkJjqsozrgZQg7LGF7J6E7J6QIO2VnCDrqoXsnbQg67CV7JWE65GQ6rOgIOyNqOyVvCDtlZzri6QuCiAgICAqKi8KCiAgICBzZXJ2aWNlRXJyb3JFdmVudEJ1cy5zZXREZWZhdWx0RXJyb3JIYW5kbGVyKGZ1bmN0aW9uIChlKSB7CiAgICAgIHZhciBlcnJvckNvZGUgPSBlLmVycm9yQ29kZTsKICAgICAgdmFyIGVycm9yTWVzc2FnZSA9IGUuZXJyb3JNZXNzYWdlOwoKICAgICAgaWYgKGVycm9yQ29kZSA9PT0gJzYxMCcgfHwgZXJyb3JDb2RlID09PSAnNjIwJyB8fCBlcnJvckNvZGUgPT09ICc2MzAnKSB7CiAgICAgICAgLy8gVG9rZW4gRXJyb3IKICAgICAgICBhbGVydChlcnJvck1lc3NhZ2UpOwogICAgICAgIHN0b3JlLmNvbW1pdCgnbG9nb3V0Jyk7CiAgICAgIH0gLy8gY29uc29sZS5sb2coIGBteSBzaXRlIGRlZmF1bHQgaGFuZGxlciAke2UudG9TdHJpbmcoKX1gICkKCiAgICB9KTsKICAgIC8qKgogICAgICog7KCE7JetIOuplOyGjOuTnAogICAgICogQHBhcmFtIGVycm9yQ29kZQogICAgICogQHBhcmFtIGhhbmRsZXIKICAgICAqIEBwYXJhbSBwcm9wYWdhdGlvbgogICAgICovCgogICAgVnVlLnByb3RvdHlwZS4kYWRkQXBpRXJyb3JIYW5kbGVyID0gZnVuY3Rpb24gKGVycm9yQ29kZSwgaGFuZGxlciwgcHJvcGFnYXRpb24pIHsKICAgICAgc2VydmljZUVycm9yRXZlbnRCdXMub24oZXJyb3JDb2RlLCBoYW5kbGVyLCBwcm9wYWdhdGlvbik7CiAgICB9OwoKICAgIFZ1ZS5wcm90b3R5cGUuJHJlbW92ZUFwaUVycm9ySGFuZGxlciA9IGZ1bmN0aW9uIChlcnJvckNvZGUsIGhhbmRsZXIpIHsKICAgICAgc2VydmljZUVycm9yRXZlbnRCdXMub2ZmKGVycm9yQ29kZSwgaGFuZGxlcik7CiAgICB9OwoKICAgIFZ1ZS5wcm90b3R5cGUuJHJlbW92ZUFwaUVycm9ySGFuZGxlciA9IGZ1bmN0aW9uIChoYW5kbGVyKSB7CiAgICAgIHNlcnZpY2VFcnJvckV2ZW50QnVzLm9mZihoYW5kbGVyKTsKICAgIH07CiAgICAvKioKICAgICAqIFRPRE86IFZ1ZSDsnpDssrQg6riw64qlIOykkSDtlZjrgpgsIFZ1ZSBkb2N1bWVudCDssLjqs6AgKOyZhCkKICAgICAqIDog7J6h7Z6I7KeAIOyViuydgCDsmKTrpZjsl5Ag64yA7ZWcIO2VuOuTpOufrOulvCDtlaDri7ntlZjripQg7Jet7ZWgKCBheGlvcyDsl5DshJwgY2F0Y2gg66GcIOyYpOulmOulvCDsnqHslYTrsoTrpqzrqbQg7JWI65CoKQogICAgICog7ZW465Ok65+s64qUIOyYpOulmCDrsI8gVnVlIOyduOyKpO2EtOyKpOyZgCDtlajqu5gg7Zi47Lac65Cc64ukLgogICAgICoqLwoKCiAgICBWdWUuY29uZmlnLmVycm9ySGFuZGxlciA9IGZ1bmN0aW9uIChlcnIsIHZtLCBpbmZvKSB7CiAgICAgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnMKICAgICAgaWYgKGVyciBpbnN0YW5jZW9mIEFwaVNlcnZpY2VFcnJvcikgewogICAgICAgIHNlcnZpY2VFcnJvckV2ZW50QnVzLmVtaXQoZXJyLmVycm9yQ29kZSwgZXJyKTsKICAgICAgfSAvLyBUT0RPOiBBUEnsl5Drn6zqsIAg7JWE64uMIOqyveyasCA/IOuIhOq1sOqwgCDsspjrpqztlZjqsozrgZQg64uk7IucIOuNmOyguOykmOyVvO2VqCAoIOuCmOykkeyXkCDsspjrpqztlaAg66y47KCcICkKCiAgICB9OwogICAgLyoqIGluamVjdCBzZXJ2aWNlCiAgICBjb25zdCBhcGlTZXJ2aWNlRmFjdG9yeSA9IG5ldyBBcGlTZXJ2aWNlRmFjdG9yeSgge2hvc3Q6b3B0aW9ucy5ob3N0fSApOwogICAgXy5mb3JFYWNoKCBhcGlTZXJ2aWNlRmFjdG9yeS5tYWtlQmFzZVNlcnZpY2VzKCkgLCBmdW5jdGlvbihzZXJ2aWNlLCBzZXJ2aWNlTmFtZSkgewogICAgICAgIFZ1ZS5wcm90b3R5cGVbc2VydmljZU5hbWVdID0gc2VydmljZTsKICAgIH0pOwogICAgXy5mb3JFYWNoKCBhcGlTZXJ2aWNlRmFjdG9yeS5tYWtlRXh0U2VydmljZXMoImh0dHBzOi8vZXh0LmRvbWFpbi5jb20vIikgLCBmdW5jdGlvbihzZXJ2aWNlLCBzZXJ2aWNlTmFtZSkgewogICAgICAgIFZ1ZS5wcm90b3R5cGVbc2VydmljZU5hbWVdID0gc2VydmljZTsKICAgIH0pOyAqLwoKICB9Cn07CmV4cG9ydCBkZWZhdWx0IEFwaVNlcnZpY2VzOw=="},{"version":3,"sources":["/Users/miyoung/Desktop/ebrainsoft_study/personal_project/bookvillage/book_village/bookvillage/front-side/admin-front/src/plugins/api-service-plugin/index.js"],"names":["store","ApiServiceError","ApiServiceErrorEventBus","ApiServices","install","Vue","options","console","log","serviceErrorEventBus","setDefaultErrorHandler","e","errorCode","errorMessage","alert","commit","prototype","$addApiErrorHandler","handler","propagation","on","$removeApiErrorHandler","off","config","errorHandler","err","vm","info","emit"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAASA,KAAT,QAAsB,eAAtB;AACA,OAAOC,eAAP,MAA4B,qBAA5B;AACA,SAAQC,uBAAR,QAAsC,qBAAtC;AAEA,IAAMC,WAAW,GAAG;AAChBC,EAAAA,OADgB,mBACRC,GADQ,EACFC,OADE,EACO;AAEnBC,IAAAA,OAAO,CAACC,GAAR,CAAYF,OAAZ;AAEA;;AACA,QAAMG,oBAAoB,GAAG,IAAIP,uBAAJ,EAA7B,CALmB,CAK0C;;AAG7D;AACR;AACA;AACA;;AACQO,IAAAA,oBAAoB,CAACC,sBAArB,CAA8C,UAACC,CAAD,EAAK;AAC/C,UAAMC,SAAS,GAAGD,CAAC,CAACC,SAApB;AACA,UAAMC,YAAY,GAAGF,CAAC,CAACE,YAAvB;;AACA,UAAID,SAAS,KAAK,KAAd,IAAuBA,SAAS,KAAK,KAArC,IAA8CA,SAAS,KAAK,KAAhE,EAAuE;AAAE;AACrEE,QAAAA,KAAK,CAACD,YAAD,CAAL;AACAb,QAAAA,KAAK,CAACe,MAAN,CAAa,QAAb;AACH,OAN8C,CAO/C;;AACH,KARD;AAWA;AACR;AACA;AACA;AACA;AACA;;AACQV,IAAAA,GAAG,CAACW,SAAJ,CAAcC,mBAAd,GAAoC,UAAWL,SAAX,EAAsBM,OAAtB,EAA+BC,WAA/B,EAA4C;AAC5EV,MAAAA,oBAAoB,CAACW,EAArB,CAAwBR,SAAxB,EAAmCM,OAAnC,EAA4CC,WAA5C;AACH,KAFD;;AAGAd,IAAAA,GAAG,CAACW,SAAJ,CAAcK,sBAAd,GAAuC,UAAUT,SAAV,EAAqBM,OAArB,EAA8B;AACjET,MAAAA,oBAAoB,CAACa,GAArB,CAAyBV,SAAzB,EAAmCM,OAAnC;AACH,KAFD;;AAGAb,IAAAA,GAAG,CAACW,SAAJ,CAAcK,sBAAd,GAAuC,UAAWH,OAAX,EAAoB;AACvDT,MAAAA,oBAAoB,CAACa,GAArB,CAAyBJ,OAAzB;AACH,KAFD;AAKA;AACR;AACA;AACA;AACA;;;AACQb,IAAAA,GAAG,CAACkB,MAAJ,CAAWC,YAAX,GAA0B,UAASC,GAAT,EAAcC,EAAd,EAAkBC,IAAlB,EAAwB;AAAG;AAEjD,UAAIF,GAAG,YAAYxB,eAAnB,EAAoC;AAChCQ,QAAAA,oBAAoB,CAACmB,IAArB,CAA2BH,GAAG,CAACb,SAA/B,EAA2Ca,GAA3C;AACH,OAJ6C,CAK9C;;AACH,KAND;AAQA;AACR;AACA;AACA;AACA;AACA;AACA;AACA;;AACK;AA9De,CAApB;AAiEA,eAAetB,WAAf","sourcesContent":["// import Vue from \"vue\";\n// import axios from 'axios';\n// import _ from 'lodash';\n// import ApiServiceFactory from \"./api-service-factory\";\nimport { store } from '@/store/index';\nimport ApiServiceError from \"./api-service-error\";\nimport {ApiServiceErrorEventBus} from './api-service-error'\n\nconst ApiServices = {\n    install(Vue , options) {\n\n        console.log(options)\n\n        /** Event emitter **/\n        const serviceErrorEventBus = new ApiServiceErrorEventBus();  // 만들어 놓은 이벤트에 관심있으면 알려주는 용도\n\n\n        /** Default error handler\n         TODO: 한번에 처리되길 원하는, 공통되는 에러로직은 전역적으로 처리해주기( 토큰문제로 인한 로그아웃 처리 ) (완)\n         : 에러처리 로직이 무조건 이 위치에 있을 필요는 없지만 그렇다고 여기 저기서 사용되서도 안된다. 반드시 의도한 케이스로 되게끔 책임자 한 명이 박아두고 써야 한다.\n        **/\n        serviceErrorEventBus.setDefaultErrorHandler(  (e)=>{\n            const errorCode = e.errorCode;\n            const errorMessage = e.errorMessage;\n            if( errorCode === '610' || errorCode === '620' || errorCode === '630') { // Token Error\n                alert(errorMessage);\n                store.commit('logout');\n            }\n            // console.log( `my site default handler ${e.toString()}` )\n        });\n\n\n        /**\n         * 전역 메소드\n         * @param errorCode\n         * @param handler\n         * @param propagation\n         */\n        Vue.prototype.$addApiErrorHandler = function ( errorCode, handler, propagation) {\n            serviceErrorEventBus.on(errorCode, handler, propagation);\n        }\n        Vue.prototype.$removeApiErrorHandler = function (errorCode, handler) {\n            serviceErrorEventBus.off(errorCode,handler);\n        }\n        Vue.prototype.$removeApiErrorHandler = function ( handler) {\n            serviceErrorEventBus.off(handler);\n        }\n\n\n        /**\n         * TODO: Vue 자체 기능 중 하나, Vue document 참고 (완)\n         * : 잡히지 않은 오류에 대한 핸들러를 할당하는 역할( axios 에서 catch 로 오류를 잡아버리면 안됨)\n         * 핸들러는 오류 및 Vue 인스턴스와 함께 호출된다.\n         **/\n        Vue.config.errorHandler = function(err, vm, info) {  // eslint-disable-line no-unused-vars\n\n            if( err instanceof ApiServiceError ){\n                serviceErrorEventBus.emit( err.errorCode , err);\n            }\n            // TODO: API에러가 아닌 경우 ? 누군가 처리하게끔 다시 던져줘야함 ( 나중에 처리할 문제 )\n        }\n\n        /** inject service\n        const apiServiceFactory = new ApiServiceFactory( {host:options.host} );\n        _.forEach( apiServiceFactory.makeBaseServices() , function(service, serviceName) {\n            Vue.prototype[serviceName] = service;\n        });\n        _.forEach( apiServiceFactory.makeExtServices(\"https://ext.domain.com/\") , function(service, serviceName) {\n            Vue.prototype[serviceName] = service;\n        }); */\n    }\n};\n\nexport default ApiServices;\n"]}]}