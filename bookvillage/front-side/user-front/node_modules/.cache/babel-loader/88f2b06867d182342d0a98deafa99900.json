{"remainingRequest":"/Users/miyoung/Desktop/ebrainsoft_study/personal_project/bookvillage/book_village/bookvillage/front-side/user-front/node_modules/babel-loader/lib/index.js!/Users/miyoung/Desktop/ebrainsoft_study/personal_project/bookvillage/book_village/bookvillage/front-side/user-front/node_modules/eslint-loader/index.js??ref--14-0!/Users/miyoung/Desktop/ebrainsoft_study/personal_project/bookvillage/book_village/bookvillage/front-side/user-front/src/plugins/api-service-plugin/index.js","dependencies":[{"path":"/Users/miyoung/Desktop/ebrainsoft_study/personal_project/bookvillage/book_village/bookvillage/front-side/user-front/src/plugins/api-service-plugin/index.js","mtime":1646450259368},{"path":"/Users/miyoung/Desktop/ebrainsoft_study/personal_project/bookvillage/book_village/bookvillage/front-side/user-front/babel.config.js","mtime":1646450256467},{"path":"/Users/miyoung/Desktop/ebrainsoft_study/personal_project/bookvillage/book_village/bookvillage/front-side/user-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/miyoung/Desktop/ebrainsoft_study/personal_project/bookvillage/book_village/bookvillage/front-side/user-front/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/miyoung/Desktop/ebrainsoft_study/personal_project/bookvillage/book_village/bookvillage/front-side/user-front/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8gaW1wb3J0IFZ1ZSBmcm9tICJ2dWUiOwovLyBpbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwovLyBpbXBvcnQgXyBmcm9tICdsb2Rhc2gnOwovLyBpbXBvcnQgQXBpU2VydmljZUZhY3RvcnkgZnJvbSAiLi9hcGktc2VydmljZS1mYWN0b3J5IjsKaW1wb3J0IEFwaVNlcnZpY2VFcnJvciBmcm9tICIuL2FwaS1zZXJ2aWNlLWVycm9yIjsKaW1wb3J0IHsgQXBpU2VydmljZUVycm9yRXZlbnRCdXMgfSBmcm9tICcuL2FwaS1zZXJ2aWNlLWVycm9yJzsKaW1wb3J0IHsgc3RvcmUgfSBmcm9tICJAL3N0b3JlIjsKdmFyIEFwaVNlcnZpY2VzID0gewogIGluc3RhbGw6IGZ1bmN0aW9uIGluc3RhbGwoVnVlLCBvcHRpb25zKSB7CiAgICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzCgogICAgLyoqIEV2ZW50IGVtaXR0ZXIgKiovCiAgICB2YXIgc2VydmljZUVycm9yRXZlbnRCdXMgPSBuZXcgQXBpU2VydmljZUVycm9yRXZlbnRCdXMoKTsKICAgIC8qKiBEZWZhdWx0IGVycm9yIGhhbmRsZXIgKiovCgogICAgc2VydmljZUVycm9yRXZlbnRCdXMuc2V0RGVmYXVsdEVycm9ySGFuZGxlcihmdW5jdGlvbiAoZSkgewogICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgdmFyIGVycm9yQ29kZSA9IGUuZXJyb3JDb2RlOwogICAgICB2YXIgZXJyb3JNZXNzYWdlID0gZS5lcnJvck1lc3NhZ2U7CgogICAgICBpZiAoZXJyb3JDb2RlID09PSAnNjEwJyB8fCBlcnJvckNvZGUgPT09ICc2MjAnIHx8IGVycm9yQ29kZSA9PT0gJzYzMCcpIHsKICAgICAgICAvLyBUb2tlbiBFcnJvcgogICAgICAgIGFsZXJ0KGVycm9yTWVzc2FnZSk7CiAgICAgICAgc3RvcmUuY29tbWl0KCdsb2dvdXQnKTsKICAgICAgfQogICAgfSk7CiAgICAvKioKICAgICAqIOyghOyXrSDrqZTshozrk5wKICAgICAqIEBwYXJhbSBlcnJvckNvZGUKICAgICAqIEBwYXJhbSBoYW5kbGVyCiAgICAgKiBAcGFyYW0gcHJvcGFnYXRpb24KICAgICAqLwoKICAgIFZ1ZS5wcm90b3R5cGUuJGFkZEFwaUVycm9ySGFuZGxlciA9IGZ1bmN0aW9uIChlcnJvckNvZGUsIGhhbmRsZXIsIHByb3BhZ2F0aW9uKSB7CiAgICAgIHNlcnZpY2VFcnJvckV2ZW50QnVzLm9uKGVycm9yQ29kZSwgaGFuZGxlciwgcHJvcGFnYXRpb24pOwogICAgfTsKCiAgICBWdWUucHJvdG90eXBlLiRyZW1vdmVBcGlFcnJvckhhbmRsZXIgPSBmdW5jdGlvbiAoZXJyb3JDb2RlLCBoYW5kbGVyKSB7CiAgICAgIHNlcnZpY2VFcnJvckV2ZW50QnVzLm9mZihlcnJvckNvZGUsIGhhbmRsZXIpOwogICAgfTsKCiAgICBWdWUucHJvdG90eXBlLiRyZW1vdmVBcGlFcnJvckhhbmRsZXIgPSBmdW5jdGlvbiAoaGFuZGxlcikgewogICAgICBzZXJ2aWNlRXJyb3JFdmVudEJ1cy5vZmYoaGFuZGxlcik7CiAgICB9OwoKICAgIFZ1ZS5jb25maWcuZXJyb3JIYW5kbGVyID0gZnVuY3Rpb24gKGVyciwgdm0sIGluZm8pIHsKICAgICAgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFycwogICAgICBpZiAoZXJyIGluc3RhbmNlb2YgQXBpU2VydmljZUVycm9yKSB7CiAgICAgICAgc2VydmljZUVycm9yRXZlbnRCdXMuZW1pdChlcnIuZXJyb3JDb2RlLCBlcnIpOwogICAgICB9CiAgICB9OwogICAgLyoqIGluamVjdCBzZXJ2aWNlCiAgICBjb25zdCBhcGlTZXJ2aWNlRmFjdG9yeSA9IG5ldyBBcGlTZXJ2aWNlRmFjdG9yeSgge2hvc3Q6b3B0aW9ucy5ob3N0fSApOwogICAgXy5mb3JFYWNoKCBhcGlTZXJ2aWNlRmFjdG9yeS5tYWtlQmFzZVNlcnZpY2VzKCkgLCBmdW5jdGlvbihzZXJ2aWNlLCBzZXJ2aWNlTmFtZSkgewogICAgICAgIFZ1ZS5wcm90b3R5cGVbc2VydmljZU5hbWVdID0gc2VydmljZTsKICAgIH0pOwogICAgXy5mb3JFYWNoKCBhcGlTZXJ2aWNlRmFjdG9yeS5tYWtlRXh0U2VydmljZXMoImh0dHBzOi8vZXh0LmRvbWFpbi5jb20vIikgLCBmdW5jdGlvbihzZXJ2aWNlLCBzZXJ2aWNlTmFtZSkgewogICAgICAgIFZ1ZS5wcm90b3R5cGVbc2VydmljZU5hbWVdID0gc2VydmljZTsKICAgIH0pOwogICAgICoqLwoKICB9Cn07CmV4cG9ydCBkZWZhdWx0IEFwaVNlcnZpY2VzOw=="},{"version":3,"sources":["/Users/miyoung/Desktop/ebrainsoft_study/personal_project/bookvillage/book_village/bookvillage/front-side/user-front/src/plugins/api-service-plugin/index.js"],"names":["ApiServiceError","ApiServiceErrorEventBus","store","ApiServices","install","Vue","options","serviceErrorEventBus","setDefaultErrorHandler","e","console","log","errorCode","errorMessage","alert","commit","prototype","$addApiErrorHandler","handler","propagation","on","$removeApiErrorHandler","off","config","errorHandler","err","vm","info","emit"],"mappings":"AAAA;AACA;AACA;AACA;AACA,OAAOA,eAAP,MAA4B,qBAA5B;AACA,SAAQC,uBAAR,QAAsC,qBAAtC;AACA,SAASC,KAAT,QAAsB,SAAtB;AAEA,IAAMC,WAAW,GAAG;AAChBC,EAAAA,OADgB,mBACRC,GADQ,EACHC,OADG,EACM;AAAE;;AAEpB;AACA,QAAMC,oBAAoB,GAAG,IAAIN,uBAAJ,EAA7B;AAEA;;AACAM,IAAAA,oBAAoB,CAACC,sBAArB,CAA6C,UAACC,CAAD,EAAK;AAC9CC,MAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AACA,UAAMG,SAAS,GAAGH,CAAC,CAACG,SAApB;AACA,UAAMC,YAAY,GAAGJ,CAAC,CAACI,YAAvB;;AACA,UAAID,SAAS,KAAK,KAAd,IAAuBA,SAAS,KAAK,KAArC,IAA8CA,SAAS,KAAK,KAAhE,EAAuE;AAAE;AACrEE,QAAAA,KAAK,CAACD,YAAD,CAAL;AACAX,QAAAA,KAAK,CAACa,MAAN,CAAa,QAAb;AACH;AACJ,KARD;AAWA;AACR;AACA;AACA;AACA;AACA;;AACQV,IAAAA,GAAG,CAACW,SAAJ,CAAcC,mBAAd,GAAoC,UAAWL,SAAX,EAAsBM,OAAtB,EAA+BC,WAA/B,EAA4C;AAC5EZ,MAAAA,oBAAoB,CAACa,EAArB,CAAwBR,SAAxB,EAAmCM,OAAnC,EAA4CC,WAA5C;AACH,KAFD;;AAGAd,IAAAA,GAAG,CAACW,SAAJ,CAAcK,sBAAd,GAAuC,UAAUT,SAAV,EAAqBM,OAArB,EAA8B;AACjEX,MAAAA,oBAAoB,CAACe,GAArB,CAAyBV,SAAzB,EAAmCM,OAAnC;AACH,KAFD;;AAGAb,IAAAA,GAAG,CAACW,SAAJ,CAAcK,sBAAd,GAAuC,UAAWH,OAAX,EAAoB;AACvDX,MAAAA,oBAAoB,CAACe,GAArB,CAAyBJ,OAAzB;AACH,KAFD;;AAGAb,IAAAA,GAAG,CAACkB,MAAJ,CAAWC,YAAX,GAA0B,UAASC,GAAT,EAAcC,EAAd,EAAkBC,IAAlB,EAAwB;AAAE;AAChD,UAAIF,GAAG,YAAYzB,eAAnB,EAAoC;AAChCO,QAAAA,oBAAoB,CAACqB,IAArB,CAA2BH,GAAG,CAACb,SAA/B,EAA2Ca,GAA3C;AACH;AACJ,KAJD;AAMA;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACK;AAhDe,CAApB;AAmDA,eAAetB,WAAf","sourcesContent":["// import Vue from \"vue\";\n// import axios from 'axios';\n// import _ from 'lodash';\n// import ApiServiceFactory from \"./api-service-factory\";\nimport ApiServiceError from \"./api-service-error\";\nimport {ApiServiceErrorEventBus} from './api-service-error'\nimport { store } from \"@/store\";\n\nconst ApiServices = {\n    install(Vue, options) { // eslint-disable-line no-unused-vars\n\n        /** Event emitter **/\n        const serviceErrorEventBus = new ApiServiceErrorEventBus();\n\n        /** Default error handler **/\n        serviceErrorEventBus.setDefaultErrorHandler( (e)=>{\n            console.log(e);\n            const errorCode = e.errorCode;\n            const errorMessage = e.errorMessage;\n            if( errorCode === '610' || errorCode === '620' || errorCode === '630') { // Token Error\n                alert(errorMessage);\n                store.commit('logout');\n            }\n        });\n\n\n        /**\n         * 전역 메소드\n         * @param errorCode\n         * @param handler\n         * @param propagation\n         */\n        Vue.prototype.$addApiErrorHandler = function ( errorCode, handler, propagation) {\n            serviceErrorEventBus.on(errorCode, handler, propagation);\n        }\n        Vue.prototype.$removeApiErrorHandler = function (errorCode, handler) {\n            serviceErrorEventBus.off(errorCode,handler);\n        }\n        Vue.prototype.$removeApiErrorHandler = function ( handler) {\n            serviceErrorEventBus.off(handler);\n        }\n        Vue.config.errorHandler = function(err, vm, info) { // eslint-disable-line no-unused-vars\n            if( err instanceof ApiServiceError ){\n                serviceErrorEventBus.emit( err.errorCode , err);\n            }\n        }\n\n        /** inject service\n        const apiServiceFactory = new ApiServiceFactory( {host:options.host} );\n        _.forEach( apiServiceFactory.makeBaseServices() , function(service, serviceName) {\n            Vue.prototype[serviceName] = service;\n        });\n        _.forEach( apiServiceFactory.makeExtServices(\"https://ext.domain.com/\") , function(service, serviceName) {\n            Vue.prototype[serviceName] = service;\n        });\n         **/\n    }\n};\n\nexport default ApiServices;\n"]}]}