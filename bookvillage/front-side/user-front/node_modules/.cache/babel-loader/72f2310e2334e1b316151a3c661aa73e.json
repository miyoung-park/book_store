{"remainingRequest":"/Users/miyoung/Desktop/ebrainSoft_study/study/personal_project/book_village/bookvillage/front-side/user-front/node_modules/babel-loader/lib/index.js!/Users/miyoung/Desktop/ebrainSoft_study/study/personal_project/book_village/bookvillage/front-side/user-front/node_modules/eslint-loader/index.js??ref--14-0!/Users/miyoung/Desktop/ebrainSoft_study/study/personal_project/book_village/bookvillage/front-side/user-front/src/plugins/api-service-plugin/index.js","dependencies":[{"path":"/Users/miyoung/Desktop/ebrainSoft_study/study/personal_project/book_village/bookvillage/front-side/user-front/src/plugins/api-service-plugin/index.js","mtime":1643266872369},{"path":"/Users/miyoung/Desktop/ebrainSoft_study/study/personal_project/book_village/bookvillage/front-side/user-front/babel.config.js","mtime":1641881662740},{"path":"/Users/miyoung/Desktop/ebrainSoft_study/study/personal_project/book_village/bookvillage/front-side/user-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/miyoung/Desktop/ebrainSoft_study/study/personal_project/book_village/bookvillage/front-side/user-front/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/miyoung/Desktop/ebrainSoft_study/study/personal_project/book_village/bookvillage/front-side/user-front/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwovLyBpbXBvcnQgVnVlIGZyb20gInZ1ZSI7Ci8vIGltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7Ci8vIGltcG9ydCBfIGZyb20gJ2xvZGFzaCc7Ci8vIGltcG9ydCBBcGlTZXJ2aWNlRmFjdG9yeSBmcm9tICIuL2FwaS1zZXJ2aWNlLWZhY3RvcnkiOwppbXBvcnQgQXBpU2VydmljZUVycm9yIGZyb20gIi4vYXBpLXNlcnZpY2UtZXJyb3IiOwppbXBvcnQgeyBBcGlTZXJ2aWNlRXJyb3JFdmVudEJ1cyB9IGZyb20gJy4vYXBpLXNlcnZpY2UtZXJyb3InOwppbXBvcnQgeyBzdG9yZSB9IGZyb20gIkAvc3RvcmUiOwp2YXIgQXBpU2VydmljZXMgPSB7CiAgaW5zdGFsbDogZnVuY3Rpb24gaW5zdGFsbChWdWUsIG9wdGlvbnMpIHsKICAgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnMKCiAgICAvKiogRXZlbnQgZW1pdHRlciAqKi8KICAgIHZhciBzZXJ2aWNlRXJyb3JFdmVudEJ1cyA9IG5ldyBBcGlTZXJ2aWNlRXJyb3JFdmVudEJ1cygpOwogICAgLyoqIERlZmF1bHQgZXJyb3IgaGFuZGxlciAqKi8KCiAgICBzZXJ2aWNlRXJyb3JFdmVudEJ1cy5zZXREZWZhdWx0RXJyb3JIYW5kbGVyKGZ1bmN0aW9uIChlKSB7CiAgICAgIGNvbnNvbGUubG9nKCJkZWZhdWx0IGhhbmRsZXIgd29yayA+Pj4+Pj4gIiArIGUudG9TdHJpbmcoKSk7CiAgICAgIHZhciBlcnJvckNvZGUgPSBlLmVycm9yQ29kZTsKICAgICAgdmFyIGVycm9yTWVzc2FnZSA9IGUuZXJyb3JNZXNzYWdlOwoKICAgICAgaWYgKGVycm9yQ29kZSA9PSAnNjEwJyB8fCBlcnJvckNvZGUgPT0gJzYyMCcgfHwgZXJyb3JDb2RlID09ICc2MzAnKSB7CiAgICAgICAgLy8gVG9rZW4gRXJyb3IKICAgICAgICBhbGVydChlcnJvck1lc3NhZ2UpOwogICAgICAgIHN0b3JlLmNvbW1pdCgnbG9nb3V0Jyk7CiAgICAgIH0KICAgIH0pOwogICAgLyoqCiAgICAgKiDsoITsl60g66mU7IaM65OcCiAgICAgKiBAcGFyYW0gZXJyb3JDb2RlCiAgICAgKiBAcGFyYW0gaGFuZGxlcgogICAgICogQHBhcmFtIHByb3BhZ2F0aW9uCiAgICAgKi8KCiAgICBWdWUucHJvdG90eXBlLiRhZGRBcGlFcnJvckhhbmRsZXIgPSBmdW5jdGlvbiAoZXJyb3JDb2RlLCBoYW5kbGVyLCBwcm9wYWdhdGlvbikgewogICAgICBzZXJ2aWNlRXJyb3JFdmVudEJ1cy5vbihlcnJvckNvZGUsIGhhbmRsZXIsIHByb3BhZ2F0aW9uKTsKICAgIH07CgogICAgVnVlLnByb3RvdHlwZS4kcmVtb3ZlQXBpRXJyb3JIYW5kbGVyID0gZnVuY3Rpb24gKGVycm9yQ29kZSwgaGFuZGxlcikgewogICAgICBzZXJ2aWNlRXJyb3JFdmVudEJ1cy5vZmYoZXJyb3JDb2RlLCBoYW5kbGVyKTsKICAgIH07CgogICAgVnVlLnByb3RvdHlwZS4kcmVtb3ZlQXBpRXJyb3JIYW5kbGVyID0gZnVuY3Rpb24gKGhhbmRsZXIpIHsKICAgICAgc2VydmljZUVycm9yRXZlbnRCdXMub2ZmKGhhbmRsZXIpOwogICAgfTsKCiAgICBWdWUuY29uZmlnLmVycm9ySGFuZGxlciA9IGZ1bmN0aW9uIChlcnIsIHZtLCBpbmZvKSB7CiAgICAgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnMKICAgICAgaWYgKGVyciBpbnN0YW5jZW9mIEFwaVNlcnZpY2VFcnJvcikgewogICAgICAgIHNlcnZpY2VFcnJvckV2ZW50QnVzLmVtaXQoZXJyLmVycm9yQ29kZSwgZXJyKTsKICAgICAgfQogICAgfTsKICAgIC8qKiBpbmplY3Qgc2VydmljZQogICAgY29uc3QgYXBpU2VydmljZUZhY3RvcnkgPSBuZXcgQXBpU2VydmljZUZhY3RvcnkoIHtob3N0Om9wdGlvbnMuaG9zdH0gKTsKICAgIF8uZm9yRWFjaCggYXBpU2VydmljZUZhY3RvcnkubWFrZUJhc2VTZXJ2aWNlcygpICwgZnVuY3Rpb24oc2VydmljZSwgc2VydmljZU5hbWUpIHsKICAgICAgICBWdWUucHJvdG90eXBlW3NlcnZpY2VOYW1lXSA9IHNlcnZpY2U7CiAgICB9KTsKICAgIF8uZm9yRWFjaCggYXBpU2VydmljZUZhY3RvcnkubWFrZUV4dFNlcnZpY2VzKCJodHRwczovL2V4dC5kb21haW4uY29tLyIpICwgZnVuY3Rpb24oc2VydmljZSwgc2VydmljZU5hbWUpIHsKICAgICAgICBWdWUucHJvdG90eXBlW3NlcnZpY2VOYW1lXSA9IHNlcnZpY2U7CiAgICB9KTsKICAgICAqKi8KCiAgfQp9OwpleHBvcnQgZGVmYXVsdCBBcGlTZXJ2aWNlczs="},{"version":3,"sources":["/Users/miyoung/Desktop/ebrainSoft_study/study/personal_project/book_village/bookvillage/front-side/user-front/src/plugins/api-service-plugin/index.js"],"names":["ApiServiceError","ApiServiceErrorEventBus","store","ApiServices","install","Vue","options","serviceErrorEventBus","setDefaultErrorHandler","e","console","log","toString","errorCode","errorMessage","alert","commit","prototype","$addApiErrorHandler","handler","propagation","on","$removeApiErrorHandler","off","config","errorHandler","err","vm","info","emit"],"mappings":";;AAAA;AACA;AACA;AACA;AACA,OAAOA,eAAP,MAA4B,qBAA5B;AACA,SAAQC,uBAAR,QAAsC,qBAAtC;AACA,SAASC,KAAT,QAAsB,SAAtB;AAEA,IAAMC,WAAW,GAAG;AAChBC,EAAAA,OADgB,mBACRC,GADQ,EACHC,OADG,EACM;AAAE;;AAEpB;AACA,QAAMC,oBAAoB,GAAG,IAAIN,uBAAJ,EAA7B;AAEA;;AACAM,IAAAA,oBAAoB,CAACC,sBAArB,CAA6C,UAACC,CAAD,EAAK;AAC9CC,MAAAA,OAAO,CAACC,GAAR,CAAY,iCAAiCF,CAAC,CAACG,QAAF,EAA7C;AACA,UAAMC,SAAS,GAAGJ,CAAC,CAACI,SAApB;AACA,UAAMC,YAAY,GAAGL,CAAC,CAACK,YAAvB;;AACA,UAAID,SAAS,IAAI,KAAb,IAAsBA,SAAS,IAAI,KAAnC,IAA4CA,SAAS,IAAI,KAA7D,EAAoE;AAAE;AAClEE,QAAAA,KAAK,CAACD,YAAD,CAAL;AACAZ,QAAAA,KAAK,CAACc,MAAN,CAAa,QAAb;AACH;AACJ,KARD;AAWA;AACR;AACA;AACA;AACA;AACA;;AACQX,IAAAA,GAAG,CAACY,SAAJ,CAAcC,mBAAd,GAAoC,UAAWL,SAAX,EAAsBM,OAAtB,EAA+BC,WAA/B,EAA4C;AAC5Eb,MAAAA,oBAAoB,CAACc,EAArB,CAAwBR,SAAxB,EAAmCM,OAAnC,EAA4CC,WAA5C;AACH,KAFD;;AAGAf,IAAAA,GAAG,CAACY,SAAJ,CAAcK,sBAAd,GAAuC,UAAUT,SAAV,EAAqBM,OAArB,EAA8B;AACjEZ,MAAAA,oBAAoB,CAACgB,GAArB,CAAyBV,SAAzB,EAAmCM,OAAnC;AACH,KAFD;;AAGAd,IAAAA,GAAG,CAACY,SAAJ,CAAcK,sBAAd,GAAuC,UAAWH,OAAX,EAAoB;AACvDZ,MAAAA,oBAAoB,CAACgB,GAArB,CAAyBJ,OAAzB;AACH,KAFD;;AAGAd,IAAAA,GAAG,CAACmB,MAAJ,CAAWC,YAAX,GAA0B,UAASC,GAAT,EAAcC,EAAd,EAAkBC,IAAlB,EAAwB;AAAE;AAChD,UAAIF,GAAG,YAAY1B,eAAnB,EAAoC;AAChCO,QAAAA,oBAAoB,CAACsB,IAArB,CAA2BH,GAAG,CAACb,SAA/B,EAA2Ca,GAA3C;AACH;AACJ,KAJD;AAMA;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACK;AAhDe,CAApB;AAmDA,eAAevB,WAAf","sourcesContent":["// import Vue from \"vue\";\n// import axios from 'axios';\n// import _ from 'lodash';\n// import ApiServiceFactory from \"./api-service-factory\";\nimport ApiServiceError from \"./api-service-error\";\nimport {ApiServiceErrorEventBus} from './api-service-error'\nimport { store } from \"@/store\";\n\nconst ApiServices = {\n    install(Vue, options) { // eslint-disable-line no-unused-vars\n\n        /** Event emitter **/\n        const serviceErrorEventBus = new ApiServiceErrorEventBus();\n\n        /** Default error handler **/\n        serviceErrorEventBus.setDefaultErrorHandler( (e)=>{\n            console.log(\"default handler work >>>>>> \" + e.toString());\n            const errorCode = e.errorCode;\n            const errorMessage = e.errorMessage;\n            if( errorCode == '610' || errorCode == '620' || errorCode == '630') { // Token Error\n                alert(errorMessage);\n                store.commit('logout');\n            }\n        });\n\n\n        /**\n         * 전역 메소드\n         * @param errorCode\n         * @param handler\n         * @param propagation\n         */\n        Vue.prototype.$addApiErrorHandler = function ( errorCode, handler, propagation) {\n            serviceErrorEventBus.on(errorCode, handler, propagation);\n        }\n        Vue.prototype.$removeApiErrorHandler = function (errorCode, handler) {\n            serviceErrorEventBus.off(errorCode,handler);\n        }\n        Vue.prototype.$removeApiErrorHandler = function ( handler) {\n            serviceErrorEventBus.off(handler);\n        }\n        Vue.config.errorHandler = function(err, vm, info) { // eslint-disable-line no-unused-vars\n            if( err instanceof ApiServiceError ){\n                serviceErrorEventBus.emit( err.errorCode , err);\n            }\n        }\n\n        /** inject service\n        const apiServiceFactory = new ApiServiceFactory( {host:options.host} );\n        _.forEach( apiServiceFactory.makeBaseServices() , function(service, serviceName) {\n            Vue.prototype[serviceName] = service;\n        });\n        _.forEach( apiServiceFactory.makeExtServices(\"https://ext.domain.com/\") , function(service, serviceName) {\n            Vue.prototype[serviceName] = service;\n        });\n         **/\n    }\n};\n\nexport default ApiServices;\n"]}]}