{"remainingRequest":"/Users/miyoung/Desktop/ebrainSoft_study/study/personal_project/book_village/bookvillage/front-side/user-front/node_modules/babel-loader/lib/index.js!/Users/miyoung/Desktop/ebrainSoft_study/study/personal_project/book_village/bookvillage/front-side/user-front/node_modules/eslint-loader/index.js??ref--14-0!/Users/miyoung/Desktop/ebrainSoft_study/study/personal_project/book_village/bookvillage/front-side/admin-front/src/plugins/api-service-plugin/index.js","dependencies":[{"path":"/Users/miyoung/Desktop/ebrainSoft_study/study/personal_project/book_village/bookvillage/front-side/admin-front/src/plugins/api-service-plugin/index.js","mtime":1642712871080},{"path":"/Users/miyoung/Desktop/ebrainSoft_study/study/personal_project/book_village/bookvillage/front-side/user-front/babel.config.js","mtime":1641881662740},{"path":"/Users/miyoung/Desktop/ebrainSoft_study/study/personal_project/book_village/bookvillage/front-side/user-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/miyoung/Desktop/ebrainSoft_study/study/personal_project/book_village/bookvillage/front-side/user-front/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/miyoung/Desktop/ebrainSoft_study/study/personal_project/book_village/bookvillage/front-side/user-front/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKLy8gaW1wb3J0IFZ1ZSBmcm9tICJ2dWUiOwovLyBpbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgXyBmcm9tICdsb2Rhc2gnOwppbXBvcnQgQXBpU2VydmljZUVycm9yIGZyb20gIi4vYXBpLXNlcnZpY2UtZXJyb3IiOwppbXBvcnQgQXBpU2VydmljZUZhY3RvcnkgZnJvbSAiLi9hcGktc2VydmljZS1mYWN0b3J5IjsKaW1wb3J0IHsgQXBpU2VydmljZUVycm9yRXZlbnRCdXMgfSBmcm9tICcuL2FwaS1zZXJ2aWNlLWVycm9yJzsKdmFyIEFwaVNlcnZpY2VzID0gewogIGluc3RhbGw6IGZ1bmN0aW9uIGluc3RhbGwoVnVlLCBvcHRpb25zKSB7CiAgICAvKiogZXZlbnQgZW1pdHRlciAqKi8KICAgIHZhciBzZXJ2aWNlRXJyb3JFdmVudEJ1cyA9IG5ldyBBcGlTZXJ2aWNlRXJyb3JFdmVudEJ1cygpOwogICAgLyoqIERlZmF1bHQgZXJyb3IgaGFuZGxlciAqKi8KICAgIC8vVE9ETzog6riw67O4IOyXkOufrCDtlbjrk6Trn6wg65Ox66GdCgogICAgc2VydmljZUVycm9yRXZlbnRCdXMuc2V0RGVmYXVsdEVycm9ySGFuZGxlcihmdW5jdGlvbiAoZSkgewogICAgICBjb25zb2xlLmxvZygibXkgc2l0ZSBkZWZhdWx0IGhhbmRsZXIgIi5jb25jYXQoZS50b1N0cmluZygpKSk7CiAgICB9KTsKCiAgICBWdWUucHJvdG90eXBlLiRhZGRBcGlFcnJvckhhbmRsZXIgPSBmdW5jdGlvbiAoZXJyb3JDb2RlLCBoYW5kbGVyLCBwcm9wYWdhdGlvbikgewogICAgICBzZXJ2aWNlRXJyb3JFdmVudEJ1cy5vbihlcnJvckNvZGUsIGhhbmRsZXIsIHByb3BhZ2F0aW9uKTsKICAgIH07CgogICAgVnVlLnByb3RvdHlwZS4kcmVtb3ZlQXBpRXJyb3JIYW5kbGVyID0gZnVuY3Rpb24gKGVycm9yQ29kZSwgaGFuZGxlcikgewogICAgICBzZXJ2aWNlRXJyb3JFdmVudEJ1cy5vZmYoZXJyb3JDb2RlLCBoYW5kbGVyKTsKICAgIH07CgogICAgVnVlLnByb3RvdHlwZS4kcmVtb3ZlQXBpRXJyb3JIYW5kbGVyID0gZnVuY3Rpb24gKGhhbmRsZXIpIHsKICAgICAgc2VydmljZUVycm9yRXZlbnRCdXMub2ZmKGhhbmRsZXIpOwogICAgfTsKCiAgICBWdWUuY29uZmlnLmVycm9ySGFuZGxlciA9IGZ1bmN0aW9uIChlcnIsIHZtLCBpbmZvKSB7CiAgICAgIGlmIChlcnIgaW5zdGFuY2VvZiBBcGlTZXJ2aWNlRXJyb3IpIHsKICAgICAgICBzZXJ2aWNlRXJyb3JFdmVudEJ1cy5lbWl0KGVyci5lcnJvckNvZGUsIGVycik7CiAgICAgIH0KICAgIH07CiAgICAvKiogaW5qZWN0IHNlcnZpY2UgKiovCgoKICAgIHZhciBhcGlTZXJ2aWNlRmFjdG9yeSA9IG5ldyBBcGlTZXJ2aWNlRmFjdG9yeSh7CiAgICAgIGhvc3Q6IG9wdGlvbnMuaG9zdAogICAgfSk7CgogICAgXy5mb3JFYWNoKGFwaVNlcnZpY2VGYWN0b3J5Lm1ha2VCYXNlU2VydmljZXMoKSwgZnVuY3Rpb24gKHNlcnZpY2UsIHNlcnZpY2VOYW1lKSB7CiAgICAgIFZ1ZS5wcm90b3R5cGVbc2VydmljZU5hbWVdID0gc2VydmljZTsKICAgIH0pOwoKICAgIF8uZm9yRWFjaChhcGlTZXJ2aWNlRmFjdG9yeS5tYWtlRXh0U2VydmljZXMoImh0dHBzOi8vZXh0LmRvbWFpbi5jb20vIiksIGZ1bmN0aW9uIChzZXJ2aWNlLCBzZXJ2aWNlTmFtZSkgewogICAgICBWdWUucHJvdG90eXBlW3NlcnZpY2VOYW1lXSA9IHNlcnZpY2U7CiAgICB9KTsKICB9Cn07CmV4cG9ydCBkZWZhdWx0IEFwaVNlcnZpY2VzOw=="},{"version":3,"sources":["/Users/miyoung/Desktop/ebrainSoft_study/study/personal_project/book_village/bookvillage/front-side/admin-front/src/plugins/api-service-plugin/index.js"],"names":["_","ApiServiceError","ApiServiceFactory","ApiServiceErrorEventBus","ApiServices","install","Vue","options","serviceErrorEventBus","setDefaultErrorHandler","e","console","log","toString","prototype","$addApiErrorHandler","errorCode","handler","propagation","on","$removeApiErrorHandler","off","config","errorHandler","err","vm","info","emit","apiServiceFactory","host","forEach","makeBaseServices","service","serviceName","makeExtServices"],"mappings":";;;AAAA;AACA;AACA,OAAOA,CAAP,MAAc,QAAd;AAEA,OAAOC,eAAP,MAA4B,qBAA5B;AACA,OAAOC,iBAAP,MAA8B,uBAA9B;AACA,SAAQC,uBAAR,QAAsC,qBAAtC;AAEA,IAAMC,WAAW,GAAG;AAChBC,EAAAA,OADgB,mBACRC,GADQ,EACHC,OADG,EACM;AAElB;AACA,QAAMC,oBAAoB,GAAG,IAAIL,uBAAJ,EAA7B;AAEA;AACA;;AACAK,IAAAA,oBAAoB,CAACC,sBAArB,CAA8C,UAACC,CAAD,EAAK;AAC/CC,MAAAA,OAAO,CAACC,GAAR,mCAAwCF,CAAC,CAACG,QAAF,EAAxC;AACH,KAFD;;AAIAP,IAAAA,GAAG,CAACQ,SAAJ,CAAcC,mBAAd,GAAoC,UAAWC,SAAX,EAAsBC,OAAtB,EAA+BC,WAA/B,EAA4C;AAC5EV,MAAAA,oBAAoB,CAACW,EAArB,CAAwBH,SAAxB,EAAmCC,OAAnC,EAA4CC,WAA5C;AACH,KAFD;;AAGAZ,IAAAA,GAAG,CAACQ,SAAJ,CAAcM,sBAAd,GAAuC,UAAUJ,SAAV,EAAqBC,OAArB,EAA8B;AACjET,MAAAA,oBAAoB,CAACa,GAArB,CAAyBL,SAAzB,EAAmCC,OAAnC;AACH,KAFD;;AAGAX,IAAAA,GAAG,CAACQ,SAAJ,CAAcM,sBAAd,GAAuC,UAAWH,OAAX,EAAoB;AACvDT,MAAAA,oBAAoB,CAACa,GAArB,CAAyBJ,OAAzB;AACH,KAFD;;AAGAX,IAAAA,GAAG,CAACgB,MAAJ,CAAWC,YAAX,GAA0B,UAASC,GAAT,EAAcC,EAAd,EAAkBC,IAAlB,EAAwB;AAC9C,UAAIF,GAAG,YAAYvB,eAAnB,EAAoC;AAChCO,QAAAA,oBAAoB,CAACmB,IAArB,CAA2BH,GAAG,CAACR,SAA/B,EAA2CQ,GAA3C;AACH;AACJ,KAJD;AAMA;;;AACA,QAAMI,iBAAiB,GAAG,IAAI1B,iBAAJ,CAAuB;AAAC2B,MAAAA,IAAI,EAACtB,OAAO,CAACsB;AAAd,KAAvB,CAA1B;;AACA7B,IAAAA,CAAC,CAAC8B,OAAF,CAAWF,iBAAiB,CAACG,gBAAlB,EAAX,EAAkD,UAASC,OAAT,EAAkBC,WAAlB,EAA+B;AAC7E3B,MAAAA,GAAG,CAACQ,SAAJ,CAAcmB,WAAd,IAA6BD,OAA7B;AACH,KAFD;;AAGAhC,IAAAA,CAAC,CAAC8B,OAAF,CAAWF,iBAAiB,CAACM,eAAlB,CAAkC,yBAAlC,CAAX,EAA0E,UAASF,OAAT,EAAkBC,WAAlB,EAA+B;AACrG3B,MAAAA,GAAG,CAACQ,SAAJ,CAAcmB,WAAd,IAA6BD,OAA7B;AACH,KAFD;AAGH;AAnCe,CAApB;AAsCA,eAAe5B,WAAf","sourcesContent":["// import Vue from \"vue\";\n// import axios from 'axios';\nimport _ from 'lodash';\n\nimport ApiServiceError from \"./api-service-error\";\nimport ApiServiceFactory from \"./api-service-factory\";\nimport {ApiServiceErrorEventBus} from './api-service-error'\n\nconst ApiServices = {\n    install(Vue, options) {\n\n        /** event emitter **/\n        const serviceErrorEventBus = new ApiServiceErrorEventBus();\n\n        /** Default error handler **/\n        //TODO: 기본 에러 핸들러 등록\n        serviceErrorEventBus.setDefaultErrorHandler(  (e)=>{\n            console.log( `my site default handler ${e.toString()}` )\n        });\n\n        Vue.prototype.$addApiErrorHandler = function ( errorCode, handler, propagation) {\n            serviceErrorEventBus.on(errorCode, handler, propagation);\n        }\n        Vue.prototype.$removeApiErrorHandler = function (errorCode, handler) {\n            serviceErrorEventBus.off(errorCode,handler);\n        }\n        Vue.prototype.$removeApiErrorHandler = function ( handler) {\n            serviceErrorEventBus.off(handler);\n        }\n        Vue.config.errorHandler = function(err, vm, info) {\n            if( err instanceof ApiServiceError ){\n                serviceErrorEventBus.emit( err.errorCode , err);\n            }\n        }\n\n        /** inject service **/\n        const apiServiceFactory = new ApiServiceFactory( {host:options.host} );\n        _.forEach( apiServiceFactory.makeBaseServices() , function(service, serviceName) {\n            Vue.prototype[serviceName] = service;\n        });\n        _.forEach( apiServiceFactory.makeExtServices(\"https://ext.domain.com/\") , function(service, serviceName) {\n            Vue.prototype[serviceName] = service;\n        });\n    }\n};\n\nexport default ApiServices;\n"]}]}