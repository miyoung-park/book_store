<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.mi.bookvillage.customer.model.dao.CustomerDAO">

    <select id="getCustomerList" resultType="CustomerVO">
        SELECT USER_SEQ
             , USER_NAME
             , USER_ID
             , USER_PW
             , USER_BIRTH
             , USER_TELL
             , USER_REG_DT
             , USER_UPDATE_DT
             , USER_ROLE
          FROM CUSTOMER
    </select>


    <select id="loginCustomer" resultType="CustomerVO">
        SELECT USER_ID ,
               USER_PW ,
               USER_NAME,
               USER_BIRTH,
               USER_TELL,
               USER_REG_DT,
               USER_ROLE
          FROM CUSTOMER
         WHERE USER_ID = #{userId}
    </select>


    <insert id="addCustomer">
        INSERT INTO CUSTOMER (
                              USER_ID ,
                              USER_PW ,
                              USER_NAME,
                              USER_BIRTH,
                              USER_TELL
                             )
                    VALUES (
                            #{userId},
                            #{userPw},
                            #{userName},
                            #{userBirth},
                            #{userTell}
                           )
    </insert>


    <select id="getCustomerBySeq" resultType="CustomerVO">
        SELECT USER_SEQ,
               USER_ID,
               USER_PW,
               USER_NAME,
               USER_BIRTH,
               USER_TELL,
               USER_REG_DT,
               USER_ROLE
         FROM CUSTOMER
        WHERE USER_SEQ = #{userSeq}
    </select>


    <select id="getCustomerById" resultType="CustomerVO">
        SELECT USER_SEQ AS USER_SEQ,
               USER_ID AS USER_ID,
               USER_PW AS USER_PW,
               USER_NAME AS USER_NAME,
               USER_BIRTH AS USER_BIRTH,
               USER_TELL AS USER_TELL,
               USER_REG_DT AS USER_REG_DT,
               USER_ROLE AS USER_ROLE
        FROM CUSTOMER
         WHERE USER_ID = #{userId}
    </select>


    <update id="updateCustomer">
        UPDATE CUSTOMER
            <set>
                <if test="userPw != null">USER_PW = #{userPw},</if>
                <if test="userName != null">USER_NAME = #{userName},</if>
                <if test="userBirth != null">USER_BIRTH = #{userBirth},</if>
                <if test="userTell != null">USER_TELL = #{userTell},</if>
               USER_UPDATE_DT = NOW()
            </set>
         WHERE USER_SEQ = #{userSeq}
    </update>


    <delete id="deleteCustomer">
        DELETE
          FROM CUSTOMER
         WHERE USER_SEQ = #{userSeq}
    </delete>







    
</mapper>